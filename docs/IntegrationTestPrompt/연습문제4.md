## 연습문제 4: 오류 시나리오 통합 테스트

### 🔹1번

```
@app/src/main/java/com/survivalcoding/gangnam2kiandroidstudy/presentation/scre
en/home

오류 시나리오 통합 테스트 하고싶어. 
시나리오는 다음과 같아
1. Fake Repository에서 에러 반환
2. 에러 상태 UI 표시 (문구 or Empty View)

테스트 요구사항도 만족했으면 좋겠어
* 성공 / 실패 케이스 각각 테스트
* 에러 시 다른 UI가 표시되는지
```

### 🔹2번

```
한국어로 답변해줘. 위 요구사항 다시 실행해
```

✦ 요청하신 에러 시나리오 통합 테스트 구현을 완료했습니다.

구현 내용:

1. `HomeState` 수정: isError 상태를 추가하여 에러
   상황을 관리하도록 했습니다.
2. `HomeViewModel` 수정: loadRecipes 함수에서 레시피
   로드 실패 시 isError 상태를 true로 업데이트하도록
   변경했습니다.
3. `HomeScreen` 수정: state.isError가 true일 때
   "에러가 발생했습니다"라는 문구를 화면 중앙에
   표시하도록 UI를 업데이트했습니다.
4. `FakeRecipeRepository` 추가: RecipeRepository를
   구현한 테스트용 가짜 저장소를 생성했습니다.
   shouldReturnError 플래그를 통해 성공/실패 케이스를
   제어할 수 있습니다.
5. `HomeIntegrationTest` 추가:
    * 성공 케이스: 정상적으로 데이터가 로드되어 "Hello
      Jega" 및 레시피 이름이 표시되는지 검증합니다.
    * 실패 케이스: FakeRecipeRepository가 에러를
      반환하도록 설정한 후, 에러 UI("에러가
      발생했습니다")가 표시되는지 검증합니다.

테스트 실행:

현재 연결된 안드로이드 기기나 에뮬레이터가 없어 자동화
테스트 실행에는 실패했으나, 코드는 정상적으로
작성되었습니다. 로컬 환경에서 에뮬레이터를 실행한 후
아래 명령어로 테스트를 수행하실 수 있습니다.

1 .\gradlew.bat app:connectedDevDebugAndroidTest
"-Pandroid.testInstrumentationRunnerArguments.class=
m.survivalcoding.gangnam2kiandroidstudy.presentation
creen.home.HomeIntegrationTest"


### 🔹3번
```
아래 이유로 loadRecipes_success_showsData가 실패했어. 문제 해결해줘
Failed to perform checkIsDisplayed check: 
Expected at most 1 node but found 2 nodes that satisfy 
(Text + InputText + EditableText contains 'Test Recipe 1' (ignoreCase: false))
```

<details>
<summary>작업 내용</summary>

"Test Recipe 1" 문구가 화면에 두 번 이상 나타나서
발생하는 문제를 해결하겠습니다. 홈 화면에는 '카테고리별
레시피'와 '최신 레시피' 두 곳에서 동일한 레시피가
표시될 수 있기 때문입니다.

onNodeWithText 대신 onAllNodesWithText를 사용하여
검색된 노드 중 첫 번째 노드를 검증하도록
HomeIntegrationTest.kt를 수정하겠습니다.
</details>