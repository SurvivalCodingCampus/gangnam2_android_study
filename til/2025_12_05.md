# 2025-12-05 TIL

## Modifier (수정자)
- Modifier는 Jetpack Compose에서 UI 요소의 크기, 동작, 모양 등을 수정하고 꾸미는데 사용
### 특징
- 체이닝 방식: 여러 Modifier 를 점으로 연결해 사용
- 순서 중요성: 적용되는 순서에 따라 다른 결과가 나타남
- 재사용 가능: 변수나 함수로 만들어 재사용 가능
- 확장 가능: 커스텀 Modifier 생성 가능

### Window Inset
- 상태 표시줄, 하단 탐색바 영역까지 패딩을 조절하고 싶을 때

### offset vs padding
- offset : 그려지는 위치 기준점 이동
- padding: 그려지는 영역 내에서 콘텐츠의 여백

## Flow
- 데이터 스트림을 표현하기 위한 구조
- LiveData 는 안드로이드의 Lifecycle 과 깊게 연관되어 있는 반면 순수 코틀린 API
- 코틀린 공식 비동기 API
- 코루틴에서 데이터 수집 가능
- Flow는 비동기적으로 계산되는 데이터 스트림
- 코루틴을 기반으로 동작
- 여러 값을 순차적으로 방출할 수 있다.

### cold stream vs hot stream
- cold stream : 수집하는 시점에 데이터 생성
- hot stream: 데이터를 계속 생성

### flow() 빌더
- flow 빌더는 코루틴을 사용하여 비동기 스트림을 생성하는데 사용
- `emit()` : Flow 내에서 값을 방출할 때 사용
- flow 빌더 내에서 suspend 함수 사용 가능
```kotlin 
    flowOf(1,2,3).collect { }
    (1..3).asFlow().collect { }
```

### launchIn()
- Flow를 새로운 코루틴에서 수집하기 위한 함수. 주로 ViewModel에서 많이 사용

### Flow 합치기 - Zip
- 두 개 이상의 Flow를 결합해 새로운 Flow를 생성하는데 사용되는 연산자
- 각 Flow 에서 방출된 값을 쌍으로 묶어 새로운 값 생성
- 두 개의 Flow가 모두 값을 방출할 때마다 호출
### Flow 합치기 - Combine
- 하나의 Flow가 값을 방출할 때마다 가장 최근의 값을 사용해 새로운 값 생성
- 방출 순서 보장 x
- 방출될 때마다 다른 Flow의 최신 값을 사용하고 싶을 때 사용

### StateFlow
- 코루틴에서 제공하는 특별한 핫 스트림 Flow
- 상태 변화를 관찰하고, 최신 상태를 유지하는데 유용하다. 안드로이드에서 주로 UI 상태 관리에 사용
- 항상 최신 상태를 유지
- StateFlow는 읽기 전용이며, 상태를 변경하려면 MutableStateFlow 사용

### 컨텍스트 전환
- flowOn 은 Flow의 연산을 특정 디스패처에서 실행하도록 지정 가능하다.

### debounce
- 이벤트 스트림에서 불필요한 이벤트를 줄이고, 성능을 최적화하는데 유용
- 연타 방지, API 호출 횟수 컨트롤 등에 활용


## Android 에서 활용
### Flow 스트림 데이터 수집
- collect or collectLatest 함수로 수집
- suspend 함수이므로 코루틴 스코프에서 수행해야 한다.

### StateFlow
- StateFlow는 초기값이 필수, LiveData는 초기값이 선택적이다
- 구독자가 필요할 때 값을 얻는다
- 값이 변경될 때만 구독자에게 값을 전달함
- value 프로퍼티로 값을 get/set 할 수 있다
- Flow가 cold 스트림 이라면, StateFlow는 hot 스트림
- UI 작업을 위해서는 데이터 홀더로써 StateFlow 사용이 일반적이다
- LiveData 와 기본적으로 역할이 동일

```kotlin
private var _state = MutableStateFlow(MainState())
val state: StateFlow<MainState> = _state
```

### SharedFlow
- hot stream
- 초기값을 가지지 않는다.
- 데이터를 읽어 들이기 전에는 아무값도 없는 데이터에 적합하다
- Flow 를 shareIn 으로 SharedFlow로 변환 가능하다
- 이벤트를 처리할 때 유용



# 근본은 hot stream 과 cold stream