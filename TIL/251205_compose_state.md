## Compose State

### 선언형 프로그래밍

- View를 수동으로 조작하면 휴먼 에러로 에러가 발생할 가능성이 커짐
- Compose는 특정 시점에 UI의 어떤 부분을 다시 그릴지 지능적으로 선택

| 명령형 프로그래밍(Imperative) | 선언형 프로그래밍(Declarative)               |
|-----------------------|--------------------------------------|
| **절차를 직접 명령**         | **원하는 결과만 선언**                       |
| 상태 변화와 흐름 제어를 개발자가 관리 | 상태 변화는 내부에서 자동 관리                    |
| 예: for, if 등 제어문 중심   | 예: 데이터 흐름, 표현 중심                     |
| 예: Java, C            | 예: SQL, HTML, React, Jetpack Compose |

### 상태관리 중요성

- UI는 항상 현재 상태의 결과물이며, 사용자 입력, 네트워크 응답, 앱의 비즈니스 로직에 따라 UI가 변화해야 함
- 상태가 제대로 관리되지 않으면,
    - UI와 데이터 불일치
    - 예상치 못한 동작
    - 복잡한 버그 발생
      → 일관성과 신뢰성 있는 UI를 유지하기 어려움
- 따라서 UI = f(State) 관계가 유지되도록 상태를 분명하게 관리

#### Jetpack Compose 에서 상태 관리

> Compose는 선언형 UI 기반이므로 상태가 변경되면 자동으로 UI가 다시 그려지는(Recomposition) 구조

- 주요 상태 관리
  | 상태 API | 설명 |
  | ------------------------------- | ---------------------- |
  | `remember { mutableStateOf() }` | 컴포저블 재컴포지션 동안 값 유지 |
  | `rememberSaveable`              | 화면 회전 등 구성 변경 시에도 값 유지 |
  | `derivedStateOf`                | 다른 상태에서 자동으로 계산된 값 관리 |
  | `StateFlow`, `LiveData`         | Compose 외부와 연동되는 상태 흐름 |


- 상태(State)와 UI의 관계
    - Compose에서 가장 중요한 원칙: `UI는 상태를 표현하는 함수`
    - `UI = State → Recomposition → Updated UI`

- 안 좋은 상태 관리 예
    - UI 내부에서 직접 View 갱신 시도
    - 여러 곳에서 같은 상태를 따로 관리 (싱크 깨짐 위험)